<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forgot Password</title>
  <link rel="stylesheet" href="index_style.css">
  <script>
    function showStep(step) {
      document.querySelectorAll(".step").forEach(div => div.style.display = "none");
      document.getElementById("step" + step).style.display = "block";
    }

    function simulateOtpSend() {
      const mobileInput = document.getElementById("mobile").value.trim();
      const mobilePattern = /^\d{11}$/;

      if (mobilePattern.test(mobileInput)) {
        alert("OTP sent to " + mobileInput);
        document.getElementById("hiddenMobile").value = mobileInput;
        showStep(2);
      } else {
        alert("Mobile number must be exactly 11 digits.");
      }
    }

    function simulateOtpVerify() {
      const enteredOtp = document.getElementById("otp").value.trim();
      const otpPattern = /^\d{6}$/;

      if (otpPattern.test(enteredOtp)) {
        alert("OTP verified successfully.");
        showStep(3);
      } else {
        alert("Invalid OTP. It must be a 6-digit number.");
      }
    }
  </script>
</head>
<body onload="showStep(1)">
  <div class="form-container">
    <h2>Forgot Password</h2>

    <!-- Step 1: Enter Mobile Number -->
    <div id="step1" class="step">
      <form onsubmit="event.preventDefault(); simulateOtpSend();">
        <input
          type="text"
          id="mobile"
          name="mobile"
          placeholder="Enter Mobile Number"
          pattern="\d{11}"
          maxlength="11"
          minlength="11"
          required
          title="Mobile number must be exactly 11 digits"
        />
        <button type="submit">Send OTP</button>
      </form>
    </div>

    <!-- Step 2: Enter OTP -->
    <div id="step2" class="step" style="display: none;">
      <form onsubmit="event.preventDefault(); simulateOtpVerify();">
        <input
          type="text"
          id="otp"
          name="otp"
          placeholder="Enter 6-digit OTP"
          pattern="\d{6}"
          maxlength="6"
          required
          title="OTP must be a 6-digit number"
        />
        <button type="submit">Verify OTP</button>
      </form>
    </div>

    <!-- Step 3: Reset Password -->
    <div id="step3" class="step" style="display: none;">
      <form action="reset-password.php" method="POST">
        <input type="hidden" name="mobile" id="hiddenMobile" />
        <input type="password" name="new_password" placeholder="New Password" required />
        <input type="password" name="confirm_password" placeholder="Confirm Password" required />
        <button type="submit">Reset Password</button>
      </form>
    </div>

    <p><a href="login.html">Back to Login</a></p>
  </div>
</body>
</html>
